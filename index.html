<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>FC Shards + Iron Calculator</title>

<style>
body {
  font-family: Arial, sans-serif;
  background: #0b1220;
  color: #e7eefc;
  margin: 0;
}
.wrap {
  max-width: 1100px;
  margin: 30px auto;
  padding: 20px;
}
h1 {
  margin: 0 0 10px 0;
}
p {
  color: #9fb0d0;
}
table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 15px;
}
th, td {
  border: 1px solid rgba(255,255,255,0.15);
  padding: 10px;
  text-align: left;
}
th {
  background: #1a2238;
}
input {
  width: 80px;
  padding: 6px;
  background: #0d1628;
  border: 1px solid rgba(255,255,255,0.25);
  color: #e7eefc;
  border-radius: 6px;
}
.num {
  font-variant-numeric: tabular-nums;
}
.bad input {
  border-color: #ff6b6b;
}
button {
  margin-top: 12px;
  padding: 8px 14px;
  background: #1a2238;
  border: 1px solid rgba(255,255,255,0.25);
  color: #e7eefc;
  border-radius: 8px;
  cursor: pointer;
}
button:hover {
  border-color: #2aa3ff;
}
</style>
</head>

<body>
<div class="wrap">
  <h1>FC Shards + Iron Calculator</h1>
  <p>Enter <b>Current</b> and <b>Target</b> (0–12). Iron is added automatically.</p>

  <table>
    <thead>
      <tr>
        <th>Skill (FC shards)</th>
        <th>Current</th>
        <th>Target</th>
        <th>FC</th>
        <th>Iron</th>
        <th>Row total</th>
      </tr>
    </thead>
    <tbody id="tbody"></tbody>
  </table>

  <button id="resetBtn">Reset</button>
</div>

<script>
const skills = [
  {
    name: "Flame Strike (fc shards)",
    fc:   [0,16,25,41,68,102,0,0,0,0,0,0,0],
    iron: [0,10,12,14,16,18,20,22,24,26,28,30,32]
  }
  // weitere Skills kannst du hier ergänzen
];

function clamp(v) {
  if (v === "") return "";
  v = Number(v);
  if (!Number.isFinite(v)) return "";
  return Math.max(0, Math.min(12, Math.trunc(v)));
}

function sumBetween(arr, cur, tgt) {
  if (!Number.isFinite(cur) || !Number.isFinite(tgt)) return 0;
  if (cur >= tgt) return 0;
  let s = 0;
  for (let i = cur + 1; i <= tgt; i++) {
    s += arr[i] || 0;
  }
  return s;
}

const tbody = document.getElementById("tbody");

skills.forEach(skill => {
  const tr = document.createElement("tr");
  tr.innerHTML = `
    <td><b>${skill.name}</b></td>
    <td><input class="cur" type="number" min="0" max="12"></td>
    <td><input class="tgt" type="number" min="0" max="12"></td>
    <td class="num fc">0</td>
    <td class="num iron">0</td>
    <td class="num row">0</td>
  `;
  tbody.appendChild(tr);
});

function recalc() {
  [...tbody.rows].forEach((row, i) => {
    const skill = skills[i];
    const curEl = row.querySelector(".cur");
    const tgtEl = row.querySelector(".tgt");

    curEl.value = clamp(curEl.value);
    tgtEl.value = clamp(tgtEl.value);

    const cur = Number(curEl.value);
    const tgt = Number(tgtEl.value);

    const invalid = Number.isFinite(cur) && Number.isFinite(tgt) && cur >= tgt;
    row.classList.toggle("bad", invalid);

    const fc = sumBetween(skill.fc, cur, tgt);
    const iron = sumBetween(skill.iron, cur, tgt);

    row.querySelector(".fc").textContent = fc;
    row.querySelector(".iron").textContent = iron;
    row.querySelector(".row").textContent = fc + iron;
  });
}

tbody.addEventListener("input", recalc);

document.getElementById("resetBtn").addEventListener("click", () => {
  document.querySelectorAll("input").forEach(i => i.value = "");
  recalc();
});
</script>

</body>
</html>
